<!DOCTYPE html>
<html>
    <body>
        <div id="minimap"></div>
        <script type="text/javascript" src="lib/jquery-2.1.1.min.js"></script>
        <script type="text/javascript">

        function renderMaps () {
            var miniMap = $('#minimap');
            miniMap.empty();

            var map;
            var mapCanvas;
            var mapWidth = 0;
            var mapHeight = 0;
            var miniMapScale = 8;
            var colorValue = 0;

            for (var i = levels.length - 1; i >= 0; i--) {
                map = $("<div class='map'></div>");
                mapWidth = levels[i][0].length;
                mapHeight = levels[i].length;

                mapCanvas = $('<canvas width="' + mapWidth * miniMapScale +
                    '" height="' + mapHeight * miniMapScale + '"></canvas>');

                var ctx = mapCanvas[0].getContext('2d');
                for (var y=0; y < mapHeight; y++) {
                    for (var x=0; x < mapWidth; x++) {
                        var wall = levels[i][y][x];
                        // If there is a wall block at this (x,y)…
                        if (wall > 0) {
                            colorValue = wall * 15;
                            ctx.fillStyle = 'rgb(' + colorValue +
                                ',' + colorValue + ',' + colorValue + ')';
                            // …Then draw a block on the minimap
                            ctx.fillRect(
                                x * miniMapScale,
                                y * miniMapScale,
                                miniMapScale, miniMapScale
                            );
                        }
                    }
                }

                map.append(mapCanvas);
                miniMap.append(map);
            };
        }

        var loadMaps = function () {
            $.getScript('app/Maps.js', function () {
                renderMaps()
            });
        }

        $().ready(function () {
            setInterval(loadMaps, 1000);
        });
        </script>
    </body>
</html>